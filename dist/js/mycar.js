"use strict";window.onload=function(){if(document.cookie)for(var t=document.cookie.split("; "),e=0;e<t.length;e++){var c=t[e].split("=");"username"==c[0]&&$(".top_content_center").html("<a href='#'>欢迎您,尊敬的"+decodeURI(c[1])+" </a>")}var n=new Date;function i(t){for(var e=document.cookie.split("; "),c=0;c<e.length;c++){var o=e[c].split("=");if(o[0]==t)return parseInt(o[1])}}n.setTime(n.getTime()-288e5+6048e5),document.cookie="productNum=0;expires="+n,$.get("../interface/showlist.php",function(t){var e=JSON.parse(t);if(1==e.code){$(".toshop_box").css({display:"none"}),$(".product_list").css({display:"block"});for(var c="",o=0;o<e.data.length;o++){c+='\n                <div class="product_item" product_id="'.concat(e.data[o].product_id,'">\n                            <div class="product_check">\n                                <input type="checkbox" name="ck1" id="check1">\n                            </div>\n                            <div class="product_img">\n                                <img src="').concat(e.data[o].product_img,'" alt="">\n                            </div>\n                            <div class="product_name">\n                                ').concat(e.data[o].product_name,'\n                            </div>\n                            <div class="product_one_price">').concat(e.data[o].product_price,'</div>\n                            <div class="product_number"> \n                                <span>-</span><strong>').concat(e.data[o].product_num,'</strong><em>+</em>\n                            </div>\n                            <div class="product_sum_price">￥').concat(e.data[o].product_price.slice(1)*e.data[o].product_num,'</div>\n                            <div class="product_operation">\n                                    删除\n                            </div>\n                </div>               \n                '),document.getElementsByClassName("product_list_main")[0].innerHTML=c,document.cookie="productNum="+(i("productNum")+parseInt(e.data[o].product_num))+";expires="+n}}else console.log("请求数据失败或者无数据"),$(".toshop_box").css({display:"block"});$(".product_number span").on("click",function(){$(this).next()[0].innerHTML<=1?$(this).css({color:"#ccc"}):($(this).next()[0].innerHTML--,$(this).parent().next()[0].innerHTML="￥"+$(this).parent().prev().text().slice(1)*$(this).next().text(),document.cookie="productNum="+(i("productNum")-1)+";expires="+n,$.get("../interface/updatewq.php",{id:$(this).parent().parent().attr("product_id"),type:"cut"},function(t){1==JSON.parse(t).code&&console.log("商品数量减少成功")}))}),$(".product_number em").on("click",function(){$(this).prev().prev().css({color:"#000"}),$(this).prev()[0].innerHTML++,document.cookie="productNum="+(i("productNum")+1)+";expires="+n,$(this).parent().next()[0].innerHTML="￥"+$(this).parent().prev().text().slice(1)*$(this).prev().text(),$.get("../interface/updatewq.php",{id:$(this).parent().parent().attr("product_id"),type:"add"},function(t){1==JSON.parse(t).code&&console.log("商品数量增加成功")})}),$(".product_operation").on("click",function(){$(this).parent().addClass("remove_now"),document.cookie="productNum="+(i("productNum")-$(this).prev().prev().children().eq(1).text())+";expires="+n,$(".remove_now").remove(),$(".product_item")[0]||$(".product_list_tit").css({display:"none"}),$.get("../interface/delwq.php",{id:$(this).parent().attr("product_id")},function(t){1==JSON.parse(t).code&&(console.log("移除商品成功"),$(".product_item")[0]||$(".toshop_box").css({display:"block"}))})})})};